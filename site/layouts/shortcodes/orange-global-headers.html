{{- /*
  Usage: `orange-global-headers args`

  `args` are all optional and can be one of the following:
    * id: set an id to avoid duplicate ids in a same page (default: "global-header")
    * responsive_logo: display a responsive logo (default: false)
    * title: add a title if defined
    * title_2: add a second title line if defined
    * mode: Mode used to display specific content if defined (choose one among ["actions", "search"])
    * labels: use generic labels instead of real-life labels (default: false)
    * labels_end: justify labels at the end (default: false)
    * minimized: display a minimized global header (default: false)
    * navigation: add a navigation bar under the global header (default: false)
*/ -}}

{{- $id := .Get "id" | default "global-header"}}
{{- $responsive_logo := .Get "responsive_logo" | default false -}}
{{- $title := .Get "title" -}}
{{- $title_2 := .Get "title_2" -}}
{{- $is_title_on_2_lines := and $title $title_2 }}
{{- $mode := .Get "mode" -}}
{{- $labels := .Get "labels" | default false -}}
{{- $labels_end := .Get "labels_end" | default false -}}
{{- $minimized := .Get "minimized" | default false -}}
{{- $navigation := .Get "navigation" | default false -}}
{{- $input := .Inner -}}

<header role="banner">
  <nav class="navbar global navbar-dark bg-dark navbar-expand-md {{ cond $minimized "header-minimized" ""}}">
    <div class="container-lg"> <!--flex-sm-wrap flex-md-nowrap-->
      <a class="navbar-brand" href="#">
        {{ if $responsive_logo }}
        <div class="figure-img m-auto d-inline-flex align-items-baseline">
          <div class="d-inline-flex align-items-baseline">
            <img class="obs-logo" src="/docs/5.1/assets/brand/OBS-logo.svg" alt="" aria-hidden="true" loading="lazy" style="width: 100%;">
          </div>
        </div>
        {{ else }}
        <img src="/docs/5.1/assets/brand/orange-logo.svg" width="50" height="50" role="img" alt="Boosted" loading="lazy">
        {{ end }}
        {{ if $is_title_on_2_lines }}
        <span class="two-lined h2">
          <span class="align-self-end">{{ $title }}</span><br>
          <span class="align-self-end">{{ $title_2 }}</span>
        </span>
        {{ else if $title }}
        <span class="title h1">{{ $title }}</span>
        {{ end }}
      </a>
      <div class="d-flex">
        <ul class="navbar-nav d-md-none flex-row">
          {{- if eq $mode "actions" }}
          <li class="nav-item">
            <a href="#" class="nav-link nav-icon">
              <svg width="1.5rem" height="1.5rem" fill="currentColor" aria-hidden="true" focusable="false" class="overflow-visible">
                <use xlink:href="/docs/5.1/assets/img/boosted-sprite.svg#search"/>
              </svg>
              <span class="visually-hidden">Search</span>
            </a>
          </li>
          <!--<li class="nav-item d-none d-sm-block">-->
          <li class="nav-item">
            <a href="#" class="nav-link nav-icon">
              <svg width="1.5rem" height="1.5rem" fill="currentColor" aria-hidden="true" focusable="false" class="overflow-visible">
                <use xlink:href="/docs/{{ $.Site.Params.docs_version }}/assets/img/boosted-sprite.svg#buy"/>
              </svg>
              <span class="visually-hidden">Basket</span>
              <span class="position-relative">
                <span class="badge">
                  1
                  <span class="visually-hidden">shopping basket items</span>
                </span>
              </span>
            </a>
          </li>
          <!--<li class="nav-item d-none d-sm-block">-->
          <li class="nav-item">
            <a href="#" class="nav-link nav-icon">
              <img src="/docs/5.1/assets/img/navbar-contact.png" width="25" height="25" role="img" alt="User" loading="lazy">
            <span class="visually-hidden">My account</span>
            </a>
          </li>
          {{- else if eq $mode "search" }}
          <ul class="navbar-nav d-md-none flex-row">
            <li class="nav-item">
              <a href="#" class="nav-link nav-icon">
                <svg width="1.5rem" height="1.5rem" fill="currentColor" aria-hidden="true" focusable="false" class="overflow-visible">
                  <use xlink:href="/docs/5.1/assets/img/boosted-sprite.svg#search"/>
                </svg>
                <span class="visually-hidden">Search</span>
              </a>
            </li>
          </ul>
          {{ end }}
        </ul>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#{{ $id }}" aria-controls="{{ $id }}" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
      <div id="{{ $id }}" class="navbar-collapse collapse {{ cond $labels_end "justify-content-end" ""}}">
        {{ if not $navigation }}
        <ul class="navbar-nav">
          {{ if $labels }}
          <li class="nav-item"><a class="nav-link active" href="#">Label</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Label</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Label</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Label</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Label</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Label</a></li>
          {{ else }}
          <li class="nav-item"><a class="nav-link active" href="#">Discover</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Shop</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Services</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Entertainment</a></li>
          <li class="nav-item"><a class="nav-link" href="#">News</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Support</a></li>
          {{ end }}
        </ul>
        {{ end }}
      </div>
      {{- if eq $mode "actions" }}
      <ul class="navbar-nav d-none d-md-flex {{ cond $minimized "" "pb-2"}}">
        <li class="nav-item">
          <a href="#" class="nav-link nav-icon">
            <svg width="1.5rem" height="1.5rem" fill="currentColor" aria-hidden="true" focusable="false" class="overflow-visible">
              <use xlink:href="/docs/5.1/assets/img/boosted-sprite.svg#search"/>
            </svg>
            <span class="visually-hidden">Search</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link nav-icon">
            <svg fill="currentColor" aria-hidden="true" focusable="false" class="overflow-visible">
              <use xlink:href="/docs/{{ $.Site.Params.docs_version }}/assets/img/boosted-sprite.svg#buy"/>
            </svg>
            <span class="visually-hidden">Basket</span>
            <span class="position-relative">
              <span class="badge">
                1
                <span class="visually-hidden">shopping basket items</span>
              </span>
            </span>
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link nav-icon">
            <img src="/docs/5.1/assets/img/navbar-contact.png" width="25" height="25" role="img" alt="User" loading="lazy">
            <span class="visually-hidden">My account</span>
          </a>
        </li>
      </ul>
      {{- else if eq $mode "search" }}
      <form class="d-flex d-none d-md-flex pb-2" role="search">
        <input class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>
      {{ end }}
    </div>
  </nav>
  {{ if $navigation }}
  <div class="navbar navbar-dark bg-dark navbar-expand-md flex-sm-wrap p-0">
    <!--TODO: border should be applied on the navbar (not wide enough)-->
    <div class="container-lg ps-md-0 border-bottom border-1 border-dark">
      <div id="{{ $id }}" class="navbar-collapse collapse">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link active" href="#">Label</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Label</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Label</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Label</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Label</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Label</a></li>
        </ul>
      </div>
    </div>
  </div>
  {{ end }}
</header>